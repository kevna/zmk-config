#define L_QU &qu Q &m_qu
#define L_LPAR &par &m_par LPAR
#define L_LBKT &bkt &m_bkt LBKT
#define L_LBRC &brc &m_brc LBRC
#define L_LT &less &m_lt LT
#define LINGER(NAME, HOLD, TAP) \
NAME: NAME { \
    compatible = "zmk,behavior-hold-tap"; \
    label = "NAME"; \
    #binding-cells = <2>; \
    tapping-term-ms = <175>; \
    quick-tap-ms = <125>; \
    flavor = "tap-preferred"; \
    bindings = <HOLD>, <TAP>; \
    hold-trigger-key-positions = <>; \
};

behaviour {
  LINGER(qu, &kp, &m_qu)
  LINGER(par, &m_par, &kp)
  LINGER(bkt, &m_bkt, &kp)
  LINGER(brc, &m_brc, &kp)
  LINGER(less, &m_lt, &kp)


  mm_lbkt: mm_lbkt {
    compatible = "zmk,behavior-mod-morph";
    label = "mm_lbkt";
    #binding-cells = <0>;
    bindings = <L_LBKT>, <L_LBRC>;
    mods = <(MOD_LSFT|MOD_RSFT)>;
  };
  mm_comma: mm_comma {
    compatible = "zmk,behavior-mod-morph";
    label = "mm_comma";
    #binding-cells = <0>;
    bindings = <&kp COMMA>, <L_LT>;
    mods = <(MOD_LSFT|MOD_RSFT)>;
  };
  mm_dot: mm_dot {
    compatible = "zmk,behavior-mod-morph";
    label = "mm_dot";
    #binding-cells = <0>;
    bindings = <&kp DOT>, <&less &m_lt GT>;
    mods = <(MOD_LSFT|MOD_RSFT)>;
  };
};
macros {
  ZMK_MACRO(m_qu,
    tap-ms = <10>;
    wait-ms = <10>;
    bindings = <&kp Q>
    , <&macro_release  &kp LSHFT  &kp RSHFT>
    , <&macro_tap  &kp U>;
  )
  ZMK_MACRO(m_par,
    tap-ms = <10>;
    wait-ms = <10>;
    bindings = <&kp LPAR  &kp RPAR  &kp LEFT>;
  )
  ZMK_MACRO(m_bkt,
    tap-ms = <10>;
    wait-ms = <10>;
    bindings = <&kp LBKT  &kp RBKT  &kp LEFT>;
  )
  ZMK_MACRO(m_brc,
    tap-ms = <10>;
    wait-ms = <10>;
    bindings = <&kp LBRC  &kp RBRC>
    , <&macro_release  &kp LSHFT  &kp RSHFT>
    , <&macro_tap  &kp LEFT>;
  )
  ZMK_MACRO(m_lt,
    tap-ms = <10>;
    wait-ms = <10>;
    bindings = <&kp LT  &kp GT>
    , <&macro_release  &kp LSHFT  &kp RSHFT>
    , <&macro_tap  &kp LEFT>;
  )
};
